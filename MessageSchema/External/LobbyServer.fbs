include "Constant.fbs";
include "CharacterInfo.fbs";
include "ServerInfo.fbs";

namespace GenericBoson.Zozo;

table AuthReq
{
    account : string;
    password : string;
}

table AuthAck
{
    result_code : ResultCode;
    token : string;
}

table CharacterListReq
{
    account : string;
    token : string;
}

table CharacterListAck
{
    result_code : ResultCode;
    character_names : [string];
}

table LoginReq
{
    account : string;
    token : string;
}

table LoginAck
{
    result_code : ResultCode;
    server_infos: [ServerInfo];
    characters  : [CharacterInfo];
}

union LobbyPayload
{
    AuthReq,
    AuthAck,
    CharacterListReq,
    CharacterListAck,
    LoginReq,
    LoginAck,
}

table LobbyMessage
{
    payload : LobbyPayload;
}

root_type AuthReq;
root_type AuthAck;
root_type CharacterListReq;
root_type CharacterListAck;
root_type LoginReq;
root_type LoginAck;
root_type LobbyMessage;